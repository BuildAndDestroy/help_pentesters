OpenPGP

##############
# Example: https://www.howtogeek.com/427982/how-to-encrypt-and-decrypt-files-with-gpg-on-linux/#:~:text=Encrypting%20FIles&text=The%20%2D%2Dencrypt%20option%20tells,re%20sending%20the%20file%20to.
##############

[*] Generate your keys

    imauser@imauser:~/keys$ gpg --full-generate-key
    gpg (GnuPG) 2.2.4; Copyright (C) 2017 Free Software Foundation, Inc.
    This is free software: you are free to change and redistribute it.
    There is NO WARRANTY, to the extent permitted by law.

    Please select what kind of key you want:
       (1) RSA and RSA (default)
       (2) DSA and Elgamal
       (3) DSA (sign only)
       (4) RSA (sign only)
    Your selection? 1
    RSA keys may be between 1024 and 4096 bits long.
    What keysize do you want? (3072) 4096
    Requested keysize is 4096 bits
    Please specify how long the key should be valid.
             0 = key does not expire
          <n>  = key expires in n days
          <n>w = key expires in n weeks
          <n>m = key expires in n months
          <n>y = key expires in n years
    Key is valid for? (0) 5
    Key expires at Wed 18 Mar 2020 12:59:12 AM MDT
    Is this correct? (y/N) y

    GnuPG needs to construct a user ID to identify your key.

    Real name: iamauser
    Email address: yoloswag420@gmail-gmail-hotmaio.com
    Comment: Test key
    You selected this USER-ID:
        "iamauser (Test key) <yoloswag420@gmail-gmail-hotmaio.com>"

    Change (N)ame, (C)omment, (E)mail or (O)kay/(Q)uit? 
    We need to generate a lot of random bytes. It is a good idea to perform
    some other action (type on the keyboard, move the mouse, utilize the
    disks) during the prime generation; this gives the random number
    generator a better chance to gain enough entropy.
    We need to generate a lot of random bytes. It is a good idea to perform
    some other action (type on the keyboard, move the mouse, utilize the
    disks) during the prime generation; this gives the random number
    generator a better chance to gain enough entropy.
    gpg: key secondkey marked as ultimately trusted
    gpg: revocation certificate stored as '/home/imauser/.gnupg/openpgp-revocs.d/PressFToPayRespectssssssssssSSSSSSSSSSSSSSSSSSSSSs.rev'
    public and secret key created and signed.

    pub   rsa4096 2020-03-13 [SC] [expires: 2020-03-18]
          PressFToPayRespectssssssssssSSSSSSSSSSSSSSSSSSSSSs
    uid                      iamauser (Test key) <yoloswag420@gmail-gmail-hotmaio.com>
    sub   rsa4096 2020-03-13 [E] [expires: 2020-03-18]


[*] Generating a Revocation Certificate

    iamauser@iamauser:~/keys$ gpg --output revocation.crt --gen-revoke yoloswag420@gmail-gmail-hotmaio.com
    gpg: 'yoloswag420@gmail-gmail-hotmaio.com' matches multiple secret keys:
    gpg:   sec  rsa4096/firstkey 2019-12-22 username1 <yoloswag420@gmail-gmail-hotmaio.com>
    gpg:   sec  rsa4096/secondkey 2020-03-13 iamauser (Test key) <yoloswag420@gmail-gmail-hotmaio.com>

    iamauser@iamauser:~/keys$ gpg --output revocation.crt --gen-revoke secondkey

    sec  rsa4096/secondkey 2020-03-13 iamauser (Test key) <yoloswag420@gmail-gmail-hotmaio.com>

    Create a revocation certificate for this key? (y/N) y
    Please select the reason for the revocation:
      0 = No reason specified
      1 = Key has been compromised
      2 = Key is superseded
      3 = Key is no longer used
      Q = Cancel
    (Probably you want to select 1 here)
    Your decision? 1
    Enter an optional description; end it with an empty line:
    > 
    Reason for revocation: Key has been compromised
    (No description given)
    Is this okay? (y/N) y
    ASCII armored output forced.
    Revocation certificate created.

    Please move it to a medium which you can hide away; if Mallory gets
    access to this certificate he can use it to make your key unusable.
    It is smart to print this certificate and store it away, just in case
    your media become unreadable.  But have some caution:  The print system of
    your machine might store the data and make it available to others!

    iamauser@iamauser:~/keys$ chmod 600 revocation.crt 

    iamauser@iamauser:~/keys$ ls -alh revocation.crt 
    -rw------- 1 iamauser iamauser 893 Mar 13 01:07 revocation.crt


[*] Importing Someone Elseâ€™s Public Key

    iamauser@iamauser:~/keys$ gpg --import tails-signing.key 
    gpg: key DBB802B258ACD84F: 3 duplicate signatures removed
    gpg: key DBB802B258ACD84F: 2167 signatures not checked due to missing keys
    gpg: key DBB802B258ACD84F: public key "Tails developers <tails@boum.org>" imported
    gpg: Total number processed: 1
    gpg:               imported: 1
    gpg: marginals needed: 3  completes needed: 1  trust model: pgp
    gpg: depth: 0  valid:   2  signed:   0  trust: 0-, 0q, 0n, 0m, 0f, 2u
    gpg: next trustdb check due at 2020-03-18


    [*] Search on a public server

        iamauser@iamauser:~/keys$ gpg --keyserver pgp.mit.edu --search-keys tails@boum.org
        gpg: data source: http://pgp.mit.edu:11371
        (1) tails-translations@boum.org <tails-translations@boum.org>
            tails-translations@boum.org <tails-translations-owner@boum.org>
            tails-translations@boum.org <tails-translations-request@boum.org>
              4096 bit RSA key 8D9F6B0A628D9B11, created: 2019-07-25
        (2) Tails developers <tails@boum.org>
              4096 bit RSA key 5C20D5DCAECAEF90, created: 2019-03-01, expires: 2021-03-01
        (3) tails-foundations@boum.org <tails-foundations@boum.org>
            tails-foundations@boum.org <tails-foundations-owner@boum.org>
            tails-foundations@boum.org <tails-foundations-request@boum.org>
              4096 bit RSA key A827FE0D677E522C, created: 2019-02-24
        (4) tails@boum.org
              2048 bit RSA key 1FCAFD19B552DE9A, created: 2019-01-07, expires: 2021-01-07
        (5) gpg --check-sigs A490D0F4D311A4153E2BB7CADBB802B258ACD84F <tails@boum.
              2048 bit RSA key DB1573A449F1F400, created: 2017-02-01
        (6) gpg --check-sigs A490D0F4D311A4153E2BB7CADBB802B258ACD84F <tails@boum.
              2048 bit RSA key 4C3DB83F3F50D2D9, created: 2016-10-30
        (7) Tails mirror pool managers (schleuder list) <tails-mirrors@boum.org>
            Tails mirror pool managers (schleuder list) <tails-mirrors-owner@boum.
            Tails mirror pool managers (schleuder list) <tails-mirrors-request@bou
              4096 bit RSA key D2EDA621B572DD73, created: 2016-04-29
        Keys 1-7 of 33 for "tails@boum.org".  Enter number(s), N)ext, or Q)uit > 3
        gpg: key A827FE0D677E522C: 6 signatures not checked due to missing keys
        gpg: key A827FE0D677E522C: "tails-foundations@boum.org <tails-foundations@boum.org>" not changed
        gpg: Total number processed: 1
        gpg:              unchanged: 1

[*] Verify And Sign A Key

    iamauser@iamauser:~/keys$ gpg --fingerprint tails@boum.org
    pub   rsa4096 2015-01-18 [C] [expires: 2020-10-07]
          A490 D0F4 D311 A415 3E2B  B7CA DBB8 02B2 58AC D84F
    uid           [ unknown] Tails developers <tails@boum.org>
    uid           [ unknown] Tails developers (offline long-term identity key) <tails@boum.org>
    sub   rsa4096 2017-08-28 [S] [expires: 2020-10-07]
    sub   rsa4096 2017-08-28 [S] [expires: 2020-10-07]
    sub   ed25519 2017-08-28 [S] [expires: 2020-10-07]
    sub   rsa4096 2018-08-30 [S] [expires: 2020-10-07]

    iamauser@iamauser:~/keys$ gpg --sign-key tails@boum.org

    pub  rsa4096/DBB802B258ACD84F
         created: 2015-01-18  expires: 2020-10-07  usage: C   
         trust: unknown       validity: unknown
    sub  rsa4096/3C83DCB52F699C56
         created: 2015-01-18  expired: 2018-01-11  usage: S   
    sub  rsa4096/98FEC6BC752A3DB6
         created: 2015-01-18  expired: 2018-01-11  usage: S   
    The following key was revoked on 2015-10-29 by RSA key DBB802B258ACD84F Tails developers <tails@boum.org>
    sub  rsa4096/AA9E014656987A65
         created: 2015-01-18  revoked: 2015-10-29  usage: S   
    sub  rsa4096/AF292B44A0EDAA41
         created: 2016-08-30  expired: 2018-01-11  usage: S   
    sub  rsa4096/D21DAD38AF281C0B
         created: 2017-08-28  expires: 2020-10-07  usage: S   
    sub  rsa4096/3020A7A9C2B72733
         created: 2017-08-28  expires: 2020-10-07  usage: S   
    sub  ed25519/90B2B4BD7AED235F
         created: 2017-08-28  expires: 2020-10-07  usage: S   
    sub  rsa4096/A8B0F4E45B1B50E2
         created: 2018-08-30  expires: 2020-10-07  usage: S   
    [ unknown] (1). Tails developers <tails@boum.org>
    [ unknown] (2)  Tails developers (offline long-term identity key) <tails@boum.org>

    Really sign all text user IDs? (y/N) y

    pub  rsa4096/DBB802B258ACD84F
         created: 2015-01-18  expires: 2020-10-07  usage: C   
         trust: unknown       validity: unknown
     Primary key fingerprint: A490 D0F4 D311 A415 3E2B  B7CA DBB8 02B2 58AC D84F

         Tails developers <tails@boum.org>
         Tails developers (offline long-term identity key) <tails@boum.org>

    This key is due to expire on 2020-10-07.
    Are you sure that you want to sign this key with your
    key "firstkey <yoloswag420@gmail-gmail-hotmaio.com>" (PressFToPayRespectssssssssssSSSSSSSSSSSSSSSSSSSSSs)

    Really sign? (y/N) y


[*] How To Share Your Public Key

    iamauser@iamauser:~/keys$ gpg --output iamauser.key --armor --export yoloswag420@gmail-gmail-hotmaio.com

    iamauser@iamauser:~/keys$ less iamauser.key 

    -----BEGIN PGP PUBLIC KEY BLOCK-----
    
    mQINBF3+tC8BEAC5E2EvVeA+5hP5LdaZSpmtIIr9Mm/kw8F87gkR+T7oOuYjvhWv
    bG0cPcns8bG5YkbsdwSw0JDGId+Yw+t9CRr/rFMqeKuonmqjAUR3uQKHaVj6NbL0
    HH7KZumw34NskZLMHkvt01v4feASq5VrTbeXMugy/0AtHkntYi2nHwQXVsylJqHU
    fQdeLTi9NpQaPgV7T3PsEKLkZDH3224DJUOr7Xi8iZptkyvYeQFopfnZkKrULPxU
    IyLvf2HkB6ckmBW8gcllUtVN5HHJYTn8HAcRpjS1s+TtT2a+7hvfaW6RIb3jiVLJ
    XC/g+u3Qsj8qv9PVuDk42Pzx2+F/mWYVM5afDYn7AKeKZkTSqRZj47HTbgXcrund
    ..
    ..


    iamauser@iamauser:~/keys$ gpg --fingerprint 
    /home/iamauser/.gnupg/pubring.kbx
    ----------------------------------
    pub   rsa4096 2020-03-13 [SC] [expires: 2020-03-18]
          PressFToPayRespectssssssssssSSSSSSSSSSSSSSSSSSSSSs
    uid           [ultimate] iamauser (Test key) <yoloswag420@gmail-gmail-hotmaio.com>
    sub   rsa4096 2020-03-13 [E] [expires: 2020-03-18]

    iamauser@iamauser:~/keys$ gpg --send-keys --keyserver pgp.mit.edu PressFToPayRespectssssssssssSSSSSSSSSSSSSSSSSSSSSs
    gpg: sending key ASGHABGBAERGBUIA7ASBLRHBG to hkp://pgp.mit.edu


[*] Encrypting files
    Now that we have a 3rd party server, we can encrypt a file and sign it.
    We will send the file to someone expecting the file.

    iamauser@iamauser:~/keys$ cat test-file.txt 
    I am a test file.
    ..
    ..

    iamauser@iamauser:~/keys$ gpg --encrypt --sign --armor -r yoloswag420@gmail-gmail-hotmaio.com test-file.txt 


    iamauser@iamauser:~/keys$ less test-file.txt.asc 

    -----BEGIN PGP MESSAGE-----
    
    hQIMA8/27bxsjKXBARAAh6AefnI74AeUeqLe1XiMwCVV/KNCE2LWQNQn25gEqVRt
    Fxu/YNoHNtVQIkhAFaYNEnucgiXVAVdp1hFXv0//hEc8i1r0RG35DfISDKC69FWe
    GbiGoOR8dOOPWcc0c6kUlA4655DqJRyHFbcXZQ82c7fvvlR02dYf+MskMlPGaM5X
    ..
    ..

[*] Decrypting The File
    Now that the user has the file, they will decrypt:

iamauser@iamauser:~/keys/read_test_file$ gpg --decrypt test-file.txt.asc > plain.txt
gpg: encrypted with 4096-bit RSA key, ID CFF6EDBC6C8CA5C1, created 2020-03-13
      "iamauser (Test key) <yoloswag420@gmail-gmail-hotmaio.com>"
gpg: Signature made Fri 13 Mar 2020 01:36:37 AM MDT
gpg:                using RSA key 5C5C14E22A7E937350BCDA6675CBB9EB07DE7E80
gpg: Good signature from "username1 <yoloswag420@gmail-gmail-hotmaio.com>" [ultimate]
iamauser@iamauser:~/keys/read_test_file$ cat plain.txt 
I am a test file.
..
..


[*] Refreshing Your Keys

    iamauser@iamauser:~/keys/read_test_file$ gpg --keyserver pgp.mit.edu --refresh-keys
    gpg: refreshing 4 keys from hkp://pgp.mit.edu
    gpg: key A827FE0D677E522C: 6 signatures not checked due to missing keys
    gpg: key A827FE0D677E522C: "tails-foundations@boum.org <tails-foundations@boum.org>" not changed
    gpg: key DBB802B258ACD84F: 14 duplicate signatures removed
    gpg: key DBB802B258ACD84F: 2281 signatures not checked due to missing keys
    gpg: key DBB802B258ACD84F: 2 signatures reordered
    gpg: key DBB802B258ACD84F: "Tails developers <tails@boum.org>" 119 new signatures
    gpg: key AED0110BA02BC847: "iamauser (Test key) <yoloswag420@gmail-gmail-hotmaio.com>" not changed
    gpg: Total number processed: 3
    gpg:              unchanged: 2
    gpg:         new signatures: 119
    gpg: marginals needed: 3  completes needed: 1  trust model: pgp
    gpg: depth: 0  valid:   2  signed:   1  trust: 0-, 0q, 0n, 0m, 0f, 2u
    gpg: depth: 1  valid:   1  signed:   0  trust: 1-, 0q, 0n, 0m, 0f, 0u
    gpg: next trustdb check due at 2020-03-18
